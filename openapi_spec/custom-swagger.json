{
  "openapi": "3.0.0",
  "info": {
    "title": "Company & Modules API",
    "version": "1.0.0",
    "description": "CRUD operations for companies and their modules"
  },
  "paths": {
    "/api/resource/Company": {
      "get": {
        "summary": "List Companies",
        "responses": {
          "200": {
            "description": "List of companies",
            "content": { "application/json": { "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Company" } } } }
          }
        }
      },
      "post": {
        "summary": "Create Company",
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Company" } } } },
        "responses": {
          "201": { "description": "Company created successfully" },
          "400": { "description": "Invalid input" }
        }
      }
    },
    "/api/resource/Company/{registrationNumber}": {
      "get": {
        "summary": "Get Company",
        "parameters": [{ "name": "registrationNumber", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Company found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Company" } } } }, "404": { "description": "Company not found" } }
      },
      "put": {
        "summary": "Update Company",
        "parameters": [{ "name": "registrationNumber", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Company" } } } },
        "responses": { "200": { "description": "Company updated successfully" }, "404": { "description": "Company not found" } }
      },
      "delete": {
        "summary": "Delete Company",
        "parameters": [{ "name": "registrationNumber", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": { "200": { "description": "Company deleted successfully" }, "404": { "description": "Company not found" } }
      }
    },

    "/api/resource/Company/{registrationNumber}/modules": {
      "get": {
        "summary": "Get Company Modules",
        "parameters": [{ "name": "registrationNumber", "in": "path", "required": true, "schema": { "type": "string" } }],
        "responses": {
          "200": { "description": "List of modules for the company", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Modules" } } } },
          "404": { "description": "Company not found" }
        }
      },
      "put": {
        "summary": "Update Company Modules",
        "parameters": [{ "name": "registrationNumber", "in": "path", "required": true, "schema": { "type": "string" } }],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Modules" } } } },
        "responses": { "200": { "description": "Modules updated successfully" }, "404": { "description": "Company not found" } }
      }
    }
  },

  "components": {
    "schemas": {
      "Company": {
        "type": "object",
        "properties": {
          "registrationNumber": { "type": "string" },
          "tpin": { "type": "string" },
          "companyName": { "type": "string" },
          "companyType": { "type": "string" },
          "companyStatus": { "type": "string" },
          "dateOfIncorporation": { "type": "string", "format": "date" },
          "industryType": { "type": "string" },
          "contactInfo": { "type": "object", "properties": {
            "companyEmail": { "type": "string" },
            "companyPhone": { "type": "string" },
            "alternatePhone": { "type": "string" },
            "contactPerson": { "type": "string" },
            "contactEmail": { "type": "string" },
            "website": { "type": "string" },
            "contactPhone": { "type": "string" }
          }},
          "address": { "type": "object", "properties": {
            "addressLine1": { "type": "string" },
            "addressLine2": { "type": "string" },
            "city": { "type": "string" },
            "district": { "type": "string" },
            "province": { "type": "string" },
            "postalCode": { "type": "string" },
            "country": { "type": "string" },
            "timeZone": { "type": "string" }
          }},
          "bankAccounts": { "type": "array", "items": { "type": "object", "properties": {
            "accountNo": { "type": "string" },
            "accountHolderName": { "type": "string" },
            "bankName": { "type": "string" },
            "swiftCode": { "type": "string" },
            "sortCode": { "type": "string" },
            "branchAddress": { "type": "string" },
            "currency": { "type": "string" },
            "dateAdded": { "type": "string", "format": "date" },
            "openingBalance": { "type": "number" }
          }}},
          "financialConfig": { "type": "object", "properties": {
            "baseCurrency": { "type": "string" },
            "financialYearStart": { "type": "string" }
          }},
          "accountingSetup": { "type": "object" },
          "terms": { "type": "object" },
          "modules": { "$ref": "#/components/schemas/Modules" },
          "documents": { "type": "object" },
          "templates": { "type": "object" }
        }
      },
      "Modules": {
        "type": "object",
        "properties": {
          "accounting": { "type": "boolean" },
          "crm": { "type": "boolean" },
          "hr": { "type": "boolean" },
          "inventory": { "type": "boolean" },
          "procurement": { "type": "boolean" },
          "sales": { "type": "boolean" },
          "supplierManagement": { "type": "boolean" }
        }
      }
    }
  }
}
